:root { --bg:#111; --panel:#1b1b1b; --text:#eaeaea; --muted:#9aa0a6; --border:#2a2a2a;
  --btn:#2d74ff; --btnText:#fff; --danger:#cc3b3b; }
* { box-sizing: border-box }
html,body,#root { height:100% }
body { margin:0; background:var(--bg); color:var(--text); font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif }
a { color: inherit; text-decoration: none }

.header { display:flex; align-items:center; gap:16px; padding:12px 16px; border-bottom:1px solid var(--border); background:var(--panel); position:sticky; top:0; z-index:10 }
.brand { font-weight:700 }
.nav { display:flex; gap:8px }
.tab { padding:8px 10px; border-radius:8px; color:var(--muted) }
.tab.active { background:#222; color:var(--text); }

.container { max-width: 1000px; margin: 24px auto; padding: 0 16px }
.card { background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:16px; }
.row { display:flex; gap:8px; align-items:center; padding:8px 0; border-bottom:1px solid var(--border) }
.row:last-child { border-bottom:none }
.stack { display:grid; gap:12px }
.spacer { flex:1 }
.muted { color:var(--muted) }

input, textarea { background:#0f0f0f; color:var(--text); border:1px solid var(--border); border-radius:8px; padding:8px }
textarea { width:100%; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

.btn { background:var(--btn); color:var(--btnText); border:none; padding:8px 12px; border-radius:10px; cursor:pointer }
.btn.ghost { background:transparent; border:1px solid var(--border) }
.btn.danger { background:var(--danger) }
.btn:disabled { opacity:0.6; cursor:not-allowed }

.grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap:12px }

/* Thumbs */
.thumb { position: relative; background:#0f0f0f; border:1px solid var(--border); border-radius:12px;
         overflow:hidden; box-shadow:0 4px 10px rgba(0,0,0,.35); transition: transform .12s ease, box-shadow .12s ease; }
.thumb:hover { transform: translateY(-2px); box-shadow:0 10px 18px rgba(0,0,0,.5) }
.thumb img { display:block; width:100%; height:auto; }
.thumb-fallback { padding:8px; font-size:12px; color:var(--muted); min-height:170px; display:flex; align-items:center; justify-content:center; text-align:center }
.as-button { all: unset; display:block; width:100%; cursor:pointer }

.count-badge {
  position: absolute;
  top: -8px;
  left: -8px;
  z-index: 3;
  background: var(--btn);
  color: #fff;
  font-weight: 700;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 999px;
  box-shadow: 0 2px 6px rgba(0,0,0,.4);
  pointer-events: none;
}

/* Lightbox */
.lightbox-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.75); display: grid; place-items: center; z-index: 1000; }
.lightbox-inner { position: relative; max-width: 92vw; max-height: 92vh }
.lightbox-inner img { max-width: 92vw; max-height: 92vh; display:block; border-radius: 12px }
.lightbox-close { position:absolute; top:-10px; right:-10px }

/* --- Wider layout only on TablePage --- */
.container.wide { max-width: 1400px; }
@media (min-width: 1600px) { .container.wide { max-width: 1600px; } }

/* Full-bleed container for the table page */
.container.table-container { max-width: 100%; padding-inline: 24px; }

/* The table "card" flexes so the canvas can grow */
.table-card { display: flex; flex-direction: column; }
.table-card .table-root { flex: 1; }

/* Fullscreen: only the table-card goes full */
.table-card:fullscreen, .table-card:-webkit-full-screen {
  width: 100vw; height: 100vh; margin: 0; border-radius: 0; padding: 16px;
}
.table-card:fullscreen .table-root, .table-card:-webkit-full-screen .table-root { min-height: 0; height: 100%; }

/* --- Table canvas (now a 2x2 quadrant grid) --- */
.table-root {
  width: 100%;
  min-height: 60vh;
  border-radius: 12px;
  border: 1px dashed var(--border);
  padding: 12px;
  position: relative;
  background:
    radial-gradient(1200px 600px at 50% 50%, rgba(255,255,255,0.04), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0));
}

.table-root.grid-4 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: minmax(320px, 1fr) minmax(320px, 1fr);
  gap: 16px;
}

/* Prevent a wide hand from expanding the grid column */
.table-root.grid-4 > .quad { 
  min-width: 0;           /* allow shrinking inside the grid column */
  min-height: 0;          /* same idea for row sizing */
}

.seat-panel { 
  min-width: 0;           /* don't let inner panel force width */
}

/* Hand stays one row and scrolls horizontally */
.hand-rail {
  display: flex;
  flex-wrap: nowrap;      /* no wrapping -> single row */
  white-space: nowrap;    /* belt & suspenders */
  overflow-x: auto;
  overflow-y: hidden;
}

/* Cards are fixed-width items so scrolling kicks in instead of reflow */
.hand-card {
  flex: 0 0 auto;         /* don't shrink, don't wrap */
}


/* Each quadrant holds [seat panel] over [battlefield] */
.quad {
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 8px;
  border: 1px dashed var(--border);
  border-radius: 12px;
  padding: 8px;
  background: rgba(255,255,255,0.02);
}

/* Seat panel (replaces the old absolutely-positioned seats) */
.seat-panel {
  padding: 10px 12px;
  border: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.35);
  border-radius: 12px;
  backdrop-filter: blur(2px);
  box-shadow: 0 2px 10px rgba(0,0,0,0.25);
}
.seat-name { font-weight: 700; font-size: 16px }
.seat-meta { font-size: 12px; opacity: 0.85; margin-top: 2px }

/* Battlefield box inside each quadrant */
.quad-bf {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: rgba(255,255,255,0.02);
  display: grid;
  place-items: center;
  color: var(--muted);
  min-height: 180px;
  /* pointer events enabled for future interactions */
}

/* Controls */
.life-controls { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }

/* Hand (horizontal, scrollable) */
.hand-rail {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 8px 4px;
  margin-top: 10px;
  border-top: 1px solid var(--border);
  scrollbar-width: thin;
}
.hand-rail::-webkit-scrollbar { height: 8px; }
.hand-rail::-webkit-scrollbar-thumb { background: #333; border-radius: 6px; }

.hand-card { flex: 0 0 auto; display: grid; gap: 6px; justify-items: center; }
.hand-card .thumb { width: 145px; height: auto; }

.hand-actions { display: flex; gap: 6px; }
.hand-actions .btn.mini { padding: 4px 8px; font-size: 12px; }

/* Remove old absolute seat/battlefield styles (superseded by quadrants) */
/* (Intentionally omitted: .seat, .seat-1..4, .table-center blocking) */
